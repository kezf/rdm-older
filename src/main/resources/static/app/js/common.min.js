$(function(){if($.fn.select2!==undefined){$("select.form-control:not(.noselect2)").each(function(){$(this).select2().on("change",function(){$(this).valid()})})}if($(".i-checks").length>0){$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})}if($(".time").length>0){layui.use("laydate",function(){var a=layui.laydate;a.render({elem:"#startTime",theme:"molv"});a.render({elem:"#endTime",theme:"molv"})})}});function createMenuItem(d,b){dataIndex=$.common.random(1,100),flag=true;if(d==undefined||$.trim(d).length==0){return false}var a=$(window.parent.document);$(".menuTab",a).each(function(){if($(this).data("id")==d){if(!$(this).hasClass("active")){$(this).addClass("active").siblings(".menuTab").removeClass("active");$(".page-tabs-content").animate({marginLeft:""},"fast");$(".mainContent .app_iframe",a).each(function(){if($(this).data("id")==d){$(this).show().siblings(".app_iframe").hide();return false}})}flag=false;return false}});if(flag){var e='<a href="javascript:;" class="active menuTab" data-id="'+d+'">'+b+' <i class="fa fa-times-circle"></i></a>';$(".menuTab",a).removeClass("active");var c='<iframe class="app_iframe" name="iframe'+dataIndex+'" width="100%" height="100%" src="'+d+'" frameborder="0" data-id="'+d+'" seamless></iframe>';$(".mainContent",a).find("iframe.app_iframe").hide().parents(".mainContent").append(c);$(".menuTabs .page-tabs-content",a).append(e)}return false}$.ajaxSetup({complete:function(a,b){if(b=="parsererror"){$.modal.confirm("登陆超时！请重新登陆！",function(){window.location.href=ctx+"login"})}}});function dept(){var a=ctx+"system/dept";createMenuItem(a,"部门管理")}function selectDeptTree(){var c=$("#treeId").val();var b=c==null||c==""?"100":c;var a=ctx+"system/dept/selectDeptTree/"+b;$.modal.open("选择部门",a,"380","380")}function queryDeptTreeDaTa(){var c={view:{selectedMulti:false},data:{key:{title:"title"},simpleData:{enable:true}},callback:{onClick:function(d,f,e){$("#deptId").val(e.id);$("#parentId").val(e.pId);$.table.search($("form").attr("id"))}}},a,b=function(){$.get(ctx+"system/dept/treeData",function(f){a=$.fn.zTree.init($("#tree"),c,f);var d=a.getNodesByParam("level",0);for(var e=0;e<d.length;e++){a.expandNode(d[e],true,false,false)}d=a.getNodesByParam("level",1);for(var e=0;e<d.length;e++){a.expandNode(d[e],true,false,false)}},null,null,"正在加载，请稍后...")};b();$("#btnExpand").click(function(){a.expandAll(true);$(this).hide();$("#btnCollapse").show()});$("#btnCollapse").click(function(){a.expandAll(false);$(this).hide();$("#btnExpand").show()});$("#btnRefresh").click(function(){b()})};